(this["webpackJsonpgoit-react-hw-06-phonebook"]=this["webpackJsonpgoit-react-hw-06-phonebook"]||[]).push([[6],{109:function(e,t,n){e.exports={appear:"App_appear__1v9PW",appearActive:"App_appearActive__1jGBG"}},114:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(0),r=n(16),o=n(115),i=n(52),s=n(65),u=n.n(s),b=n(111),l=n(21),j=function(e){return e.contacts.items},p=function(e){return e.contacts.filter},m=function(e){return e.contacts.loading},h=Object(l.a)(j,p,(function(e,t){var n=t.toLocaleLowerCase();return e.filter((function(e){return e.name.toLocaleLowerCase().includes(n)}))})),f=n(50),O=n.n(f),d=n(51),_=n(4),x=n(53),v=n.n(x),C=n(9);function w(){var e=Object(b.a)(),t=e.register,n=e.handleSubmit,o=e.errors,s=Object(a.useState)(""),l=Object(i.a)(s,2),p=l[0],m=l[1],h=Object(a.useState)(""),f=Object(i.a)(h,2),O=f[0],d=f[1],x=Object(r.c)(),w=Object(r.d)(j),g=function(){m(""),d("")},k=function(e){e.preventDefault();var t=e.currentTarget,n=t.name,c=t.value;switch(n){case"name":m(c);break;case"number":d(c)}};return Object(c.jsxs)("form",{onSubmit:n((function(){var e,t;if(w.map((function(e){return e.name.toLocaleLowerCase()})).includes(p.toLocaleLowerCase()))return g(),alert("".concat(p," is already in contacts!"));x((e=p,t=O,function(n,c){var a=c().auth.idToken,r={name:e,number:t};n(Object(C.b)()),v.a.post("".concat("https://hw7-phonebook-default-rtdb.firebaseio.com/","/contacts.json?auth=").concat(a),r).then((function(e){var t=e.data;return n(Object(C.c)(Object(_.a)(Object(_.a)({},r),{},{id:t.name})))})).catch((function(e){return n(Object(C.a)(e))}))})),g()})),className:u.a.form,children:[Object(c.jsxs)("label",{className:u.a.label,children:["Name:",Object(c.jsx)("input",{type:"text",name:"name",value:p,placeholder:"enter name",onChange:k,className:u.a.input,ref:t({required:!0})})]}),o.name&&"required"===o.name.type&&Object(c.jsx)("p",{className:u.a.warn,children:"This is required "}),Object(c.jsxs)("label",{className:u.a.label,children:["Number:",Object(c.jsx)("input",{type:"tel",name:"number",value:O,placeholder:"enter number",ref:t({required:!0,pattern:/^[0-9]+$/gm}),onChange:k,className:u.a.input})]}),o.number&&"required"===o.number.type&&Object(c.jsx)("p",{className:u.a.warn,children:"This is required "}),o.number&&"pattern"===o.number.type&&Object(c.jsx)("p",{className:u.a.warn,children:"There must be numbers"}),Object(c.jsx)("button",{type:"submit",className:u.a.button,children:"Add contact"})]})}var g=n(116),k=n(85),y=n.n(k),F=(n(86),function(){var e=Object(r.c)(),t=Object(r.d)(h);Object(a.useEffect)((function(){e(function(){var e=Object(d.a)(O.a.mark((function e(t,n){var c,a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Object(C.i)()),e.prev=1,e.next=4,v.a.get("".concat("https://hw7-phonebook-default-rtdb.firebaseio.com/","/contacts.json"));case 4:c=e.sent,a=c.data,r=Object.keys(a).map((function(e){return Object(_.a)(Object(_.a)({},a[e]),{},{id:e})})),t(Object(C.j)(r)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t(Object(C.h)(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}())}),[]);var n=function(t){return e(function(e){return function(){var t=Object(d.a)(O.a.mark((function t(n,c){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(C.f)()),t.prev=1,t.next=4,v.a.delete("".concat("https://hw7-phonebook-default-rtdb.firebaseio.com/","/contacts/").concat(e,".json"));case 4:n(Object(C.g)(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),n(Object(C.e)(t.t0));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}()}(t))};return Object(c.jsx)(g.a,{component:"ul",children:t.map((function(e){var t=e.id,a=e.name,r=e.number;return Object(c.jsx)(o.a,{timeout:400,classNames:y.a,children:Object(c.jsxs)("li",{className:y.a.item,children:[Object(c.jsxs)("p",{children:[a,": ",r]}),Object(c.jsx)("button",{type:"button",onClick:function(){return n(t)},className:y.a.button,children:"Delete"})]},t)},t)}))})}),N=n(87),A=n.n(N),L=Object(r.b)((function(e){return{value:p(e)}}),(function(e){return{OnFilterContacts:function(t){return e(C.d(t.currentTarget.value))}}}))((function(e){var t=e.value,n=e.OnFilterContacts;return Object(c.jsx)("div",{classNames:A.a,children:Object(c.jsxs)("label",{children:["Find contacts by name:",Object(c.jsx)("input",{type:"text",value:t,onChange:n,placeholder:"Search contact"})]})})})),S=n(88),T=n(89),q=n(112),z=n(110),E=n(90),J=n.n(E),P=function(e){Object(q.a)(n,e);var t=Object(z.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(T.a)(n,[{key:"render",value:function(){return Object(c.jsx)(J.a,{type:"TailSpin",color:"#00BFFF",height:100,width:100,timeout:3e3,style:{margin:"auto"}})}}]),n}(a.Component),V=n(109),B=n.n(V);t.default=function(){var e=Object(r.d)(p),t=Object(r.d)(j),n=Object(r.d)(m);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(o.a,{in:!0,classNames:B.a,appear:!0,timeout:1e3,unmountOnExit:!0,children:Object(c.jsx)("h1",{children:"Phonebook"})}),Object(c.jsx)(w,{}),Object(c.jsx)("h2",{children:"Contacts"}),(e.length>0||t.length>1)&&Object(c.jsx)(L,{}),n&&Object(c.jsx)(P,{}),Object(c.jsx)(F,{})]})}},65:function(e,t,n){e.exports={form:"ContactForm_form__2Kinz",label:"ContactForm_label__2Fdr7",input:"ContactForm_input__1Ahv4",button:"ContactForm_button__sioAz",warn:"ContactForm_warn__1YVhA"}},85:function(e,t,n){e.exports={item:"ContactList_item__2R1V7",button:"ContactList_button__20C9Q",enter:"ContactList_enter__vJt0x",enterActive:"ContactList_enterActive__3Hn21",exit:"ContactList_exit__1S6zz",exitActive:"ContactList_exitActive__2wNcC"}},86:function(e,t,n){},87:function(e,t,n){e.exports={enter:"Filter_enter__22M92",enterActive:"Filter_enterActive__3-LQS",exit:"Filter_exit__1dVP_",exitActive:"Filter_exitActive__LEmnx"}}}]);
//# sourceMappingURL=6.72ad3f61.chunk.js.map